<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hewlett Packard Enterprise" /><link rel="canonical" href="https://scod.hpedev.io/csi_driver/partners/suse_virtualization/index.html" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <meta property="og:title" content="HPE Storage Container Orchestrator Documentation (SCOD)"/>
    <meta property="og:description" content="This is an umbrella documentation project for all container integrations surrounding HPE block, file and object storage. Tailored for IT ops, developers and technology partners."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://scod.hpedev.io"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://scod.hpedev.io/img/hpe-social-og-image01.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    
    <title>SUSE Virtualization - SCOD.HPEDEV.IO</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/hpedev.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "SUSE Virtualization";
        var mkdocs_page_input_path = "csi_driver/partners/suse_virtualization/index.md";
        var mkdocs_page_url = "/csi_driver/partners/suse_virtualization/index.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PC28RTKKTW"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', "G-PC28RTKKTW");
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/hpe.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE CSI DRIVER FOR KUBERNETES</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using.html">Using</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Container Storage Providers</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../container_storage_provider/hpe_alletra_storage_mp_b10000/index.html">HPE Alletra Storage MP B10000, Alletra 9000, Primera and 3PAR</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../container_storage_provider/hpe_alletra_storage_mp_b10000_file_service/index.html">HPE Alletra Storage MP B10000 File Service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../container_storage_provider/hpe_alletra_6000/index.html">HPE Alletra 5000/6000 and Nimble Storage</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../metrics.html">Metrics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../monitor.html">Pod Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../operations.html">Auxiliary Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../diagnostics.html">Diagnostics</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Partner Ecosystems</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../hpe_morpheus/install.html">HPE Morpheus Kubernetes Service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../hpe_ezmeral/install.html">HPE Ezmeral Runtime Enterprise</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../amazon_eks_anywhere/index.html">Amazon EKS Anywhere</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../canonical/index.html">Canonical</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cohesity/index.html">Cohesity</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../commvault/index.html">Commvault</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../kasten/index.html">Veeam Kasten</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mirantis/index.html">Mirantis</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../redhat_openshift/index.html">Red Hat OpenShift</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">SUSE Virtualization</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#supportability">Supportability</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deployment_considerations">Deployment Considerations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#iscsi_networking">iSCSI Networking</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#installing_hpe_csi_driver_for_kubernetes">Installing HPE CSI Driver for Kubernetes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configure_resources">Configure Resources</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#using_vm_snapshots">Using VM snapshots</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../suse_rancher/index.html">SUSE Rancher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../tkgi/index.html">Tanzu TKGI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../vmware/index.html">VMware</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE COSI DRIVER FOR KUBERNETES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cosi_driver/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cosi_driver/deployment.html">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cosi_driver/using.html">Using</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cosi_driver/diagnostics.html">Diagnostics</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE GREENLAKE FOR FILE STORAGE</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../filex_csi_driver/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../filex_csi_driver/deployment.html">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../filex_csi_driver/using.html">Using</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEARN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../learn/persistent_storage/index.html">Persistent Storage for Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../learn/introduction_to_containers/index.html">For HPE partners:<br />&nbsp;&nbsp; Introduction to Containers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../learn/csi_primitives/index.html">Introduction to CSI Primitives</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../learn/video_gallery/index.html">Video Gallery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../learn/csi_workshop/index.html">Interactive CSI Workshop</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">COMMUNITY</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://developer.hpe.com">HPE Developer</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://slack.hpedev.io">Sign up to HPE Developer on Slack</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod/issues/new?title=I have some feedback on SCOD">Got feedback?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EXTERNAL LINKS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod">SCOD on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage">HPE Storage on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://hpe.com/storage/containers">Storage for Containers on hpe.com</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../legal/support/index.html">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../legal/license/index.html">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../legal/notices/index.html">Notices</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGACY DRIVERS AND PLUGINS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../legacy/index.html">Docker, FlexVolume and CSPs</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">SCOD.HPEDEV.IO</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">HPE CSI DRIVER FOR KUBERNETES</li>
          <li class="breadcrumb-item">Partner Ecosystems</li>
      <li class="breadcrumb-item active">SUSE Virtualization</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p><img src="img/SUSECertifiedSV.png" align="right" width="128" hspace="12" vspace="2" /></p>
<p><em>"Harvester is a modern hyperconverged infrastructure (HCI) solution built for bare metal servers using enterprise-grade open-source technologies including Linux, KVM, Kubernetes, KubeVirt, and Longhorn. Designed for users looking for a flexible and affordable solution to run cloud-native and virtual machine (VM) workloads in your datacenter and at the edge, Harvester provides a single pane of glass for virtualization and cloud-native workload management."</em><sup>1</sup></p>
<div align="right"><small><sup>1</sup> = quote from <a href="https://harvesterhci.io/">HarvesterHCI.io</a>.</small></div>
<p><br/></p>
<div class="toc">
<ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#supportability">Supportability</a></li>
<li><a href="#deployment_considerations">Deployment Considerations</a></li>
<li><a href="#limitations">Limitations</a><ul>
<li><a href="#iscsi_networking">iSCSI Networking</a><ul>
<li><a href="#example_iscsi_configuration">Example iSCSI Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#installing_hpe_csi_driver_for_kubernetes">Installing HPE CSI Driver for Kubernetes</a></li>
<li><a href="#configure_resources">Configure Resources</a><ul>
<li><a href="#using_vm_snapshots">Using VM snapshots</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="supportability">Supportability<a class="headerlink" href="#supportability" title="Permanent link">&para;</a></h2>
<p>HPE supports the underlying host OS, SLE Micro, using the HPE CSI Driver for Kubernetes and the Rancher Kubernetes Engine 2 (RKE2) which is a CNCF certified Kubernetes distribution. SUSE Virtualization (formerly Harvester) embeds KubeVirt and uses standard CSI storage constructs to manage storage resources for virtual machines.</p>
<ul>
<li>Learn more about <a href="../../index.html#compatibility_and_support">Compatibility &amp; Support</a></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SCOD documentation refers to SUSE Virtualization as Harvester.</p>
</div>
<h2 id="deployment_considerations">Deployment Considerations<a class="headerlink" href="#deployment_considerations" title="Permanent link">&para;</a></h2>
<p>Many of the features provided by Harvester stem from the capabilities of KubeVirt. The HPE CSI Driver for Kubernetes provides "ReadWriteMany" block storage which allows seamless migration of VMs between hosts with disks attached. The NFS Server Provisioner may be used by disparate VMs that needs "ReadWriteMany" to share data.</p>
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<p>These limitatons are framed around the integration of the HPE CSI Driver for Kubernetes and Harvester. Other limitations may apply.</p>
<h3 id="iscsi_networking">iSCSI Networking<a class="headerlink" href="#iscsi_networking" title="Permanent link">&para;</a></h3>
<p>As per best practice HPE recommends using dedicated iSCSI networks for data traffic between the Harvester nodes and the storage platform.</p>
<p>Ancillary network configuration of Harvester nodes is managed as a post-install step. Creating network configuration files for Harvester nodes is beyond the scope of this document. Follow the guides provided by Harvester.</p>
<ul>
<li><a href="https://docs.harvesterhci.io/v1.5/install/update-harvester-configuration">Update Harvester Configuration After Installation</a></li>
</ul>
<h4 id="example_iscsi_configuration">Example iSCSI Configuration<a class="headerlink" href="#example_iscsi_configuration" title="Permanent link">&para;</a></h4>
<p>In a typical setup the IP addresses are assigned by DHCP on the NIC directly without any bridges, VLANs or bonds. Network interface configuration on Harvester are part of the node boot strap process post-install. Create the file <code>/oem/89_hpe-csi-iscsi.yaml</code> described below on each compute node to reflect a typical configuration.</p>
<p> <pre><code class=text>name: HPE CSI Driver for Kubernetes iSCSI configuration
stages:
  initramfs:
    - commands: []
      files:
        - path: /etc/sysconfig/network/ifcfg-ens1f1
          permissions: 384
          owner: 0
          group: 0
          content: |
            STARTMODE='onboot'
            BOOTPROTO='dhcp'
            DHCLIENT_SET_DEFAULT_ROUTE='no'
          encoding: &quot;&quot;
          ownerstring: &quot;&quot;
        - path: /etc/sysconfig/network/ifcfg-ens1f0
          permissions: 384
          owner: 0
          group: 0
          content: |
            STARTMODE='onboot'
            BOOTPROTO='dhcp'
            DHCLIENT_SET_DEFAULT_ROUTE='no'
          encoding: &quot;&quot;
          ownerstring: &quot;&quot;
</code></pre></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Replace the interface names <code>ens1f0</code> and <code>ens1f1</code> with the actual interface names on your compute nodes. List the available interfaces on the compute node prompt with <code>ip link</code>.</p>
</div>
<p>Reboot the node and verify that IP addresses have been assigned to the NICs by running <code>ip addr show dev &lt;interface name&gt;</code> on the compute node prompt.</p>
<ul>
<li>Learn more about <a href="https://docs.harvesterhci.io/v1.5/networking/index">Harvester networking</a> in the official docs.</li>
</ul>
<h2 id="installing_hpe_csi_driver_for_kubernetes">Installing HPE CSI Driver for Kubernetes<a class="headerlink" href="#installing_hpe_csi_driver_for_kubernetes" title="Permanent link">&para;</a></h2>
<p>The HPE CSI Driver for Kubernetes is installed on Harvester by using the standard procedures for <a href="../../deployment.html#helm">installing the CSI driver with Helm</a>. Helm require access to the Harvester cluster through the Kubernetes API. You can download the Harvester cluster KubeConfig file by visiting the dashboard on your cluster and click "support" in the lower left corner of the UI.</p>
<p><img alt="" src="img/support.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It does not matter if Harvester is managed by Rancher or running standalone. If the cluster is managed by Rancher, then go to the Virtualization Management dashboard and select "Download KubeConfig" in the dotted context menu of the cluster.</p>
</div>
<p>Once the CSI driver is installed, make sure to go through the next steps to <a href="#configure_resources">Configure Resources</a>.</p>
<h2 id="configure_resources">Configure Resources<a class="headerlink" href="#configure_resources" title="Permanent link">&para;</a></h2>
<p>In order to upload images, boot VMs and attach data volumes from a HPE storage backend, a <code>StorageClass</code> and <code>Secret</code> needs to be configured. These steps are outlined in the <a href="../../deployment.html#add_an_hpe_storage_backend">deployment section</a> on SCOD.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Booting VMs from a HPE CSI Driver backed volume requires Harvester 1.5.0 or newer.</p>
</div>
<h3 id="using_vm_snapshots">Using VM snapshots<a class="headerlink" href="#using_vm_snapshots" title="Permanent link">&para;</a></h3>
<p>A <code>VolumeSnapshotClass</code> needs to be created for the HPE CSI Driver in order to be able to create VM and volume snapshots. Follow the example on the <a href="../../using.html#using_csi_snapshots">Using</a> page.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The external snapshotter is already installed by Harvester. Only a <code>VolumeSnapshotClass</code> is needed.</p>
</div>
<p>Next, for the Harvester control-plane to recognize the <code>VolumeSnapshotClass</code> to be used for the "csi.hpe.com" CSI driver prefix, bring up the "Advanced -&gt; Settings" panel and create the mapping as illustrated below.</p>
<p><img alt="" src="img/csi-driver-config.png" /></p>
<p>Harvester is now ready for use with HPE CSI Driver for Kubernetes.</p>
              
            </div>
          </div>

<footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2020-2025 Hewlett Packard Enterprise Development LP<br />Give <a href="https://github.com/hpe-storage/scod/issues/new?title=csi_driver/partners/suse_virtualization/index.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/hpe-storage/scod" class="fa fa-code-fork" style="color: #fcfcfc"> hpe-storage/scod</a>
        </span>
    
    
      <span><a href="../redhat_openshift/index.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../suse_rancher/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
